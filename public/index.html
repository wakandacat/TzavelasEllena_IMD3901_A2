<!DOCTYPE html>
<html>
    <head>
      <title>Assignment 2</title>
      <meta name="description" content="Assignment 2">
      <!--  note we are using 1.5.0 as most recent -->
      <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
      <script src="https://unpkg.com/aframe-environment-component@1.3.3/dist/aframe-environment-component.min.js"></script>
      
      <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-physics-system@v4.2.2/dist/aframe-physics-system.min.js"></script>
     
      <script src="js/selected-colour.js"></script>
      <script src="js/ball-manipulation.js"></script>
    
      <style>
        #UI {
          position: absolute;
          z-index: 9999;
          display: none;

          font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
          color:aqua;
        }
        #specialBack{
          background-color: blue;
          width: 500px;
          height: 500px;
          transform: rotate(-30deg);
        }
        #qualities{
          background-color: blue;
          width: 700px;
          height: 700px;
          transform: rotate(-55deg);
        }
        .specialBig{
          position: relative;
          padding: 50px;
          padding-bottom: 10px;
          margin-bottom: 0px;
          font-size: 3em;
        }
        #holding{
          top: -280px;
          left: 280px;
        }
        #about{
          top: -750px;
          left: 280px;
        }
        .specialSmall{
          position: relative;
          padding-left: 50px;
          margin: 0px;
        }
        #snowball1{
          top: -300px;
          left: 280px;
        }
        #snowball2{
          top: -770px;
          left: 280px;
        }
      </style>

    </head>

    <script>
      //attached to the scene
      AFRAME.registerComponent('hold-state', {
          schema: {
            isHolding: {type: 'boolean', default: false},
          },
          multiple:false,
          init: function() { //setup/constructor

              // const data = this.data;
              // var el = this.el;
              // var snow = document.querySelectorAll('.snow');
              // var text = document.querySelector('#text');
              // var camera = document.querySelector('#cam');
              // var snowBall = document.querySelector('#ball');


          },
          tick: function(){
              const data = this.data;
              var el = this.el;
              var UI = document.querySelector('#UI');

              if (document.querySelectorAll('.ball')){
                //console.log(length);
                var listOfBalls = document.querySelectorAll('.ball');
                var length = listOfBalls.length;

                for(let i = 0; i < length; i++){
                  if(listOfBalls[i].getAttribute('ball-manipulation').isManipulating == true){
                    this.data.isHolding = true;
                    UI.style.display = 'block';
                  } else {
                    this.data.isHolding = false;
                  //  text.setAttribute('visible', true);
                    UI.style.display = 'none';
                  }
                }

                // console.log(document.querySelector('.ball').getAttribute('ball-manipulation').isManipulating);
                // if(document.querySelector('.ball').getAttribute('ball-manipulation').isManipulating == true){
                //   this.data.isHolding = true;
                //   UI.style.display = 'block';
                // } else {
                //   this.data.isHolding = false;
                // //  text.setAttribute('visible', true);
                //   UI.style.display = 'none';
                // }

              }
          },
      });

    </script>

    <body>

      <!--UI-->
      <div id="UI">
        <!--

          top: -300px;
          left: -300px;

        <section>
          <div id="specialBack">
          </div>
          <h1 class="specialBig" id="holding">HOLDING</h1>
          <h3 class="specialSmall" id="snowball1">SNOWBALL</h3>
        </section>
        <section>
          <div id="qualities">
          </div>
          <h1 class="specialBig" id="about">ABOUT</h1>
          <div class="specialSmall" id="snowball2">
            <h3>SNOWBALL</h3>
            <div class="slidecontainer">
              <input type="range" min="1" max="100" value="50" class="slider" id="ballScale">
            </div></div>
          <h3 id="size"></h3>
          <h3 id="colour"></h3>
        </section>
        -->
        holding snowball
        <div class="slidecontainer">
          <input type="range" min="1" max="10" value="5" class="slider" id="ballScale">
          <input type="color" id="ballColor" name="ballColor" value="#bad8d2"><br><br>
        </div>
      </div>


      <!--all a-frame stuff needs to be in an a-scene-->
        <a-scene physics="debug:true" hold-state="isHolding: false"> 
            <!--camera-->
            <a-entity id="cam" camera wasd-controls look-controls position="0 1.6 0">
                <!--interactions-->
                <!--cursor creates a raycast interaction system where we cast a ray into the scene and check for intersections with the faces of certain objects-->
                <!--object:.interactive; means only interactive with objects with the CLASSNAME "interactive"-->
                <a-entity id="mouse" cursor="rayOrigin:mouse;" raycaster="far:5; interval:200; objects: .interactive;"></a-entity>
            </a-entity>
            
            <!--environment-->
            <a-entity environment="preset: forest; fog: 0.75; shadow: true; groundTexture: none; groundColor: rgb(255, 255, 255); dressingColor: rgb(172,217,180)"></a-entity>

            <!--ground-->
            <a-entity static-body class="ground" 
                        geometry="primitive:plane; width:100; height:100;"
                        material="color: white;"
                        position="0 0.01 0"
                        rotation="-90 0 0">
            </a-entity>

            <!--text-->
            <a-entity id="text" position="0 1 -7.5" visible="false" text="value:PICK UP; color:aqua; font:roboto; width:1.5; anchor:left; baseline:top; wrapCount:12;">
            </a-entity>

            <!--interactable snow pile-->
            <a-entity id="snowPile" class="interactive" 
            geometry="primitive:sphere; radius:0.9;"
            material="opacity: 0;"
            position="0 0 -7.5"
            selected-colour="color: rgb(235, 247, 245)">
                <a-entity class="snow"
                  geometry="primitive:sphere; radius:0.5;"
                  position="0.3 0 0.2"
                  material="color: rgb(186, 216, 210);">
                </a-entity>
                <a-entity class="snow"
                  geometry="primitive:sphere; radius:0.3;"
                  position="-0.1 0 0.4"
                  material="color: rgb(186, 216, 210);">
                </a-entity>
                <a-entity class="snow"
                  geometry="primitive:sphere; radius:0.6;"
                  position="-0.1 0 0"
                  material="color: rgb(186, 216, 210);">
                </a-entity>
            </a-entity>
        </a-scene>
    </body>

</html>